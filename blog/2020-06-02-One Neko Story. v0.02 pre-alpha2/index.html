<!DOCTYPE html> <html lang="en"> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111024724-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-111024724-1'); </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>One Neko Story. v0.02 pre-alpha2</title> <meta name="description" content="В данной статье рассказывается про версию 0.02 pre-alpha2 проекта «One Neko Story»."> <link rel="canonical" href="https://murlab.github.io/blog/2020-06-02-One%20Neko%20Story.%20v0.02%20pre-alpha2/"> <link rel="alternate" type="application/rss+xml" title="Mur Laboratory" href="/feed.xml"> <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /> <link rel="icon" type="image/png" href="/favicon.png" /> <link rel="stylesheet" type="text/css" href="/css/all.css" /> <link rel="stylesheet" type="text/css" href="/css/fonts.css" /> <link rel="stylesheet" type="text/css" href="/css/main.css" /> <script type="text/javascript" src="/js/main.js"></script> <link rel="stylesheet" href="/css/highlight/monokai-sublime.css"> <script src="/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Article", "headline": "One Neko Story. v0.02 pre-alpha2", "image": "https://murlab.github.io/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/title.png", "keywords": [ "мои проекты", "приключения нэки", "one neko story", "rpg maker mv" ], "datePublished": "2020-06-02", "dateModified": "2020-06-02", "articleSection": "my_games", "author": { "@type": "Person", "name": "Mur" }, "creator": { "@type": "Person", "name": "Mur" }, "publisher": { "@type": "Organization", "name": "Mur Lab", "logo":{"@type":"ImageObject", "url":"https://murlab.github.io/images/avatar.png"} }, "articleBody": "Всем привет! Как говорится, не прошло и три года, а я уже со всех лап спешу донести наконец-таки очередную свою поделку «One Neko Story v0.02 pre-alpha2». На этот раз можно не только посмотреть на карту, но и даже поизучать и взаимодействовать предметами, NPC итд. Но обо всём по порядку! ", "mainEntityOfPage": "True" } </script> </head> <body onload="init();"> <div class="center"> <div class="header"> <div class="topLogo"></div> <div class="topMenuAdd"> <a href="/files/" class="topMenuItem" title="Файлы для скачивания"><i class="fas fa-download" aria-hidden="true"></i></a> <a href="/feed.xml" class="topMenuItem" title="Подписаться на RSS"><i class="fas fa-rss" aria-hidden="true"></i></a> </div> </div> <div id="navbar" class="topMenu"> <div class="topMenuLeft"></div> <div class="topMenuCenter"> <span class="topMenuSpace">&nbsp;</span> <span><a href="/blog/" class="topMenuItem active"><i class="fas fa-paw" aria-hidden="true"></i><br>Блог</a></span> <span><a href="/graphics/" class="topMenuItem"><i class="fas fa-pencil-alt" aria-hidden="true"></i><br>Графика</a></span> <span><a href="/misc/" class="topMenuItem"><i class="fas fa-code" aria-hidden="true"></i><br>Разное</a></span> <span><a href="/my_games/" class="topMenuItem"><i class="fas fa-gamepad" aria-hidden="true"></i><br>My Games</a></span> <span><a href="/rpg_maker/" class="topMenuItem"><i class="fas fa-gem" aria-hidden="true"></i><br>RPG Maker</a></span> <span><a href="/godot/" class="topMenuItem"><i class="fas fa-cogs" aria-hidden="true"></i><br>Godot</a></span> <span><a href="/about/" class="topMenuItem"><i class="fab fa-github-alt" aria-hidden="true"></i><br>Мур?</a></span> </div> <div class="topMenuRight"></div> <a href="/"><div class="topMenuAvatar"></div></a> <div class="popupMenu"> <input id="popupMenuInput" type="checkbox" name="menu"/> <label id="popupMenuLabel" for="popupMenuInput"><span class="fa fa-bars topMenuIcon" aria-hidden="true"></span></label> <ul class="menu"> <li><a href="/blog/" class="popupMenuItem active"><i class="fas fa-paw" aria-hidden="true"></i>Блог</a></li> <li><a href="/graphics/" class="popupMenuItem"><i class="fas fa-pencil-alt" aria-hidden="true"></i>Графика</a></li> <li><a href="/misc/" class="popupMenuItem"><i class="fas fa-code" aria-hidden="true"></i>Разное</a></li> <li><a href="/my_games/" class="popupMenuItem"><i class="fas fa-gamepad" aria-hidden="true"></i>My Games</a></li> <li><a href="/rpg_maker/" class="popupMenuItem"><i class="fas fa-gem" aria-hidden="true"></i>RPG Maker</a></li> <li><a href="/godot/" class="popupMenuItem"><i class="fas fa-cogs" aria-hidden="true"></i>Godot</a></li> <li><a href="/about/" class="popupMenuItem"><i class="fab fa-github-alt" aria-hidden="true"></i>Мур?</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/comments/" class="popupMenuItem"><i class="far fa-comment-alt" aria-hidden="true"></i> Новые комментарии</a></li> <li><a href="https://murlab.disqus.com/latest.rss" class="popupMenuItem"><i class="fas fa-rss" aria-hidden="true"></i> RSS комментариев</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/archive/" class="popupMenuItem"><i class="fas fa-archive" aria-hidden="true"></i> Архив постов</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/files/" class="popupMenuItem"><i class="fas fa-download" aria-hidden="true"></i> Cкачать файлы</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/tags/" class="popupMenuItem"><i class="fas fa-tags" aria-hidden="true"></i> Все тэги</a></li> <li><a href="/feed.xml" class="popupMenuItem"><i class="fas fa-rss" aria-hidden="true"></i> RSS лента</a></li> </ul> </div> </div> <div class="content"> <div class="post"> <div class="postHeader"> <div class="postStar"><i class="fas fa-gamepad" aria-hidden="true"></i></div> <div class="postDate"> 2 Июня 2020 </div> <div class="postTitle">One Neko Story. v0.02 pre-alpha2</div> </div> <div class="postContent"> <div class="postImage"> <img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/title.png" /> </div> <div class="postBody"> <p>Всем привет!</p> <p>Как говорится, не прошло и три года, а я уже со всех лап спешу донести наконец-таки очередную свою поделку «One Neko Story v0.02 pre-alpha2». На этот раз можно не только посмотреть на карту, но и даже поизучать и взаимодействовать предметами, NPC итд.</p> <p>Но обо всём по порядку!</p> <p>Новая версия представляет собой уже что-то более менее похожее на игру. Имеются три дополнительные локации: это комната главной героини, откуда собственно и начинается повествование истории, дом, в котором она проживает вместе с мамой и собственно небольшой подвал, он же погреб.</p> <p>История начинается с того, что главной героине снится странный сон, который прерывается звуком будильника. Изначально (ещё в версии под VX Ace) это был небольшой вступительный ролик с титрами в виде сна. Сейчас мне показалось, что это выглядит немного блёкло, поэтому пока не хочу вставлять это в игру. Возможно в будущем это будет что-то типа отдельной видео вставки, а может что-то в виде комикса. В любом случае время подумать ещё будет.</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/begin.png" class="imgCenter" /></p> <p>В данной версии используется моя новая разработка плагин для RPG Maker MV — NPC. Не смотря на довольно короткое название это целый конструктор. Изначально планировалось, что это будет что-то типа упрощенного варианта диалогов. Мне не нравилось, что при каждом диалоге в новом месте (локации) приходилось создавать новое событие (event) на карте и с помощью кучи переменных, как локальных, так и глобальных разруливать варианты ведения разговора.</p> <p>Конечно, при простеньких диалогов это было не так страшно, но чем больше появлялось ветвлений и вариантов ответов, запутаться становилось всё проще и проще. Так же было очень неудобно, когда NPC, с которым вёлся диалог, перемещался по карте. Это могло быть как в пределах одной карты, так и совершенно на других картах и при различных условиях.</p> <p>Так появилась идея создать для каждого действующего лица свой сценарий поведения, который бы не был привязан к конкретному событию на карте. За основу были взяты уже имеющиеся персонажи (актёры / actors) из rpg maker. Во первых у них можно задать сразу аватарку, которая будет отображать в диалогах, а во вторых их можно сразу будет добавить в группу, если по сюжету это будет необходимо.</p> <p>В самих событиях на карте, при активации вызывается команда вызова плагина:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/plugin_cmd.png" class="imgCenter" /></p> <p>После команды может идти либо цифра, которая укажет на ID актёра, либо это может быть название предмета события в виде текста.</p> <p>Второй вариант был придуман несколько позже для того, что бы можно было взаимодействовать к предметами на карте. Для них тоже создаётся свой сценарий и сохраняется в отдельную папку.</p> <p>Что бы не было путаницы в именах, была сделана древовидная структура в виде вложенной локации карт, например:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/structure.png" class="imgCenter" /></p> <p>Все сценарии хранятся в папке data/npc. Если это сценарий для актёра, то он хранится прямо в корне папки NPC в формате JSON и имеет имя в виде «id_2.json», где 2 это ID актёра. Далее идёт название карт, например:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/scenario.png" class="imgCenter" /></p> <ul> <li>neko_village это название главной карты</li> <li>mi_house это дом главной героини на карте</li> <li>attic это мансарда, где находится её комната</li> </ul> <p>ну и далее название предметов для которых подготовлены сценарии взаимодействия с ними.</p> <p>Каждый сценарий имеет свою структуру, в виде одного или нескольких блоков, а каждый блок предстаёт в виде исполняемых шагов:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/example.png" class="imgCenter" /></p> <p>При обращении к сценарию, плагин берёт номер блока, в котом сценарий остановился предыдущий раз, переходит на этот блок и начинает выполнение сценария с 0-го шага. Исполнение может быть принудительно прервано, может быть определён новый шаг или номер блока, а также выполнен мгновенный переход. Выполнение сценария заканчивается, когда достигнут последний шаг.</p> <p>Каждый шаг представляет собой команду в поле «type» и вспомогательные данные. Например, команда «leader_text» выводит текстовое сообщения от лица главной героини, которое содержится в «content», а для отображения аватарки и эмоции используются данные из «face» и «faceIndex» соответственно. Для других команд могут быть использованы другие (свои) поля с данными.</p> <p>С увеличением числа необходимых команд увеличивался и размер сценария, и как следствие росла сложность его редактирования. Уже легко было запутаться в структуре, переходах, а держать в голове все необходимы «переменные» вообще было не простой задачей. Но сложнее всего было в ситуации, когда сценарий нужно было «раздвинуть» и впихнуть новые данные, и все переходы на другие шаги начинали «плыть».</p> <p>В результате чего мне пришла в голову очередная «безумная» идея создать свой визуальный редактор, в котором бы с лёгкостью можно было бы добавлять новые блоки, редактировать связи (переходы) и т.д.</p> <p>На данном этапе редактор существует в виде тестовой версии и имеет примерно такой вид:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/npc_editor.png" class="imgCenter" /></p> <p>Пока это всё ещё в довольно-таки сыром виде, но уже можно более-менее наполнять сценарии и все файлы текущей pre-alpha версии созданы с его помощь. В ближайшем будущем скорее всего я выпущу его в виде отдельной программы, но пока загадывать рано.</p> <p>Кроме плагина «NPC» в игре используются несколько переработанные плагины:</p> <p>«Info Box» — используется для отображения сообщений сбоку, по аналогии со Skyrim ¬‿¬ Причём плагин сам перехватывает системные события добавление и убавление предметов, вооружения, золота или навыков:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/window_info.png" class="imgCenter" /></p> <p>«VX Style Choices» — меню выбора вариантов ответа, не виде отдельного окна, а возвращает его в область сообщений, как это было в ранних версиях RPG Maker.</p> <p>«Big Avatar» — собственно плагин для отображения больших аватарок.</p> <p>«Map Title» — плагин для отображения названия местности и других событий:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/map_title.png" class="imgCenter" /></p> <p>«Window Decor» — переработанный плагин для рамок окошек. Ранее (в VX Ace) средняя часть окошка дублировалась, в результате чего можно было делать красивое оформление. В RPG Maker MV почему-то посчитали это слишком большой роскошью и сделали вариант «тупо растянуть». В результате чего, если окно в виде линий, то всё ок, но, если это рисунок, всё превращается в растянутую кашу. Мой плагин, возвращает как было.</p> <p>Ну и последние два плагина «Equips» и «Window Info» используются для манипуляций (снять/одеть/подобрать) с экипировкой и отображения информации по предметам и экипировки в целом:</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/equips.png" class="imgCenter" /></p> <p>Причём мне так же не понятно, по какой такой причине в стандартном варианте RPG Maker параметры и свойства предметов, а так же суммарные свойства не доступны игроку.</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/items.png" class="imgCenter" /></p> <p>Данные плагины по возможности решили данный промах. При этом ещё в Notes предмета можно указать его классовую принадлежность, всего их 8 вариантов:</p> <ul> <li>NG (no grade) - серого цвета, низкий (crude) класс</li> <li>D grade - белого цвета, обычный (basic) класс</li> <li>C grade - зелёного цвета, надёжный (grand) класс</li> <li>B grade - синего цвета, раритетный (rare) класс</li> <li>A grade - фиолетового цвета, скрытый (arcane) класс</li> <li>S grade - красного цвета, героический (heroic) класс</li> <li>R1 grade - жёлтого цвета, эпический (epic) класс</li> <li>R2 grade - оранжевого цвета, легендарный (legendary) класс</li> </ul> <p>Цвета пока примерные и в последствии всё возможно ещё поменяется.</p> <p><img src="/images.posts/2020.06/02 - One Neko Story. v0.02 pre-alpha2/equips2.png" class="imgCenter" /></p> <p>Помимо персонажа Neko, подготовлены варианты для девушки, парня и кота. У кота некоторые слоты недоступны, потому что у него лапки (:</p> <p>На этом пока всё, плагины пока выкладывать не буду, ибо они находятся в постоянной доработке.</p> <p>Заранее большое спасибо за помощь в тестировании.</p> <p>Как и в прошлый раз загрузки разбиты на две части:</p> <p>Собственно, сам движок RPG Maker MV ~45Mb в архиве — <a href="/downloads/my_projects/one_neko_story/OneNekoStory_Engine.7z">Скачать движок «OneNekoStory_Engine.7z»</a>, который остался неизменным с прошлого раза.</p> <p>И игровые файлы (в данном случае v0.02), папка «www» ~43Mb в архиве (добавились ресурсы в виде картинок, музыки и графики).</p> <p>Архив «v0.02.7z» необходимо распаковать внутрь папки «OneNekoStory», туда, где расположена сама игра Game.exe — <a href="/downloads/my_projects/one_neko_story/v0.02.7z">Скачать игровые файлы «v0.02.7z»</a></p> <p>При дальнейших обновлениях вам будет достаточно скачать архив с новой версией и заменить содержимое папки www.</p> <div class="postTags"> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/moi proekty/">мои проекты</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/prikljuchenija neki/">приключения нэки</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/one neko story/">one neko story</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/rpg maker mv/">rpg maker mv</a></div> </div> </div> <div class="postEnd"> <div class="postEndLineStart"></div> <div class="postEndCont"><a href="javascript:history.back();"><< Назад</a></div> <div class="postEndLineFinish"></div> </div> </div> <div id="disqus_thread"></div> <script> (function() { var d = document, s = d.createElement('script'); s.src = 'https://murlab.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <div class="centerClean"></div> </div> </div> <div class="centerEnd"><div></div></div> <div class="footer">2014, 2020 &copy; Mur Laboratory. Размещение материалов на других ресурсах только с разрешения автора.</div> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111024724-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-111024724-1'); </script> </body> </html>
