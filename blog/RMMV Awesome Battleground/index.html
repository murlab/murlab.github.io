<!DOCTYPE html> <html lang="en"> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111024724-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-111024724-1'); </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>RMMV Awesome Battleground</title> <meta name="description" content="В данной статье рассказывается о новом плагине для RPG Maker MV — «MUR Awesome Battleground»"> <link rel="canonical" href="https://murlab.github.io/blog/RMMV%20Awesome%20Battleground/"> <link rel="alternate" type="application/rss+xml" title="Mur Laboratory" href="/feed.xml"> <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /> <link rel="icon" type="image/png" href="/favicon.png" /> <link rel="stylesheet" type="text/css" href="/css/font-awesome.css" /> <link rel="stylesheet" type="text/css" href="/css/main.css" /> <script type="text/javascript" src="/js/main.js"></script> <link rel="stylesheet" href="/css/highlight/monokai-sublime.css"> <script src="/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Article", "headline": "RMMV Awesome Battleground", "image": "https://murlab.github.io/images.posts/2018.01/08 - RMMV Awesome Battleground/plugin_title.png", "keywords": [ "rpg maker mv", "plugins", "javascript" ], "datePublished": "2018-01-08", "dateModified": "2018-01-08", "articleSection": "rpg_maker", "author": { "@type": "Person", "name": "Mur" }, "creator": { "@type": "Person", "name": "Mur" }, "publisher": { "@type": "Organization", "name": "Mur Lab", "logo":{"@type":"ImageObject", "url":"https://murlab.github.io/images/avatar.png"} }, "articleBody": "И снова всем привет! В конце октября, начале ноября прошлого года на «Светлой Академии» проходил конкурс плагинов для RPG Maker. Конкурс проходил первый раз и как организатору данного мероприятия мне было немного боязно, что работ будет очень мало, если вообще будут. ", "mainEntityOfPage": "True" } </script> </head> <body onload="init();"> <div class="center"> <div class="header"> <div class="topLogo"></div> <div class="topMenuAdd"> <a href="/files/" class="topMenuItem" title="Файлы для скачивания"><i class="fa fa-download" aria-hidden="true"></i></a> <a href="/feed.xml" class="topMenuItem" title="Подписаться на RSS"><i class="fa fa-rss" aria-hidden="true"></i></a> </div> </div> <div id="navbar" class="topMenu"> <div class="topMenuLeft"></div> <div class="topMenuCenter"> <span class="topMenuSpace">&nbsp;</span> <span><a href="/blog/" class="topMenuItem active"><i class="fa fa-paw" aria-hidden="true"></i><br>Блог</a></span> <span><a href="/graphics/" class="topMenuItem"><i class="fa fa-pencil" aria-hidden="true"></i><br>Графика</a></span> <span><a href="/misc/" class="topMenuItem"><i class="fa fa-code" aria-hidden="true"></i><br>Разное</a></span> <span><a href="/rpg_maker/" class="topMenuItem"><i class="fa fa-diamond" aria-hidden="true"></i><br>RPG Maker</a></span> <span><a href="/godot/" class="topMenuItem"><i class="fa fa-cogs" aria-hidden="true"></i><br>Godot</a></span> <span><a href="/about/" class="topMenuItem"><i class="fa fa-github-alt" aria-hidden="true"></i><br>Мур?</a></span> </div> <div class="topMenuRight"></div> <a href="/"><div class="topMenuAvatar"></div></a> <div class="popupMenu"> <input id="popupMenuInput" type="checkbox" name="menu"/> <label id="popupMenuLabel" for="popupMenuInput"><span class="fa fa-bars topMenuIcon" aria-hidden="true"></span></label> <ul class="menu"> <li><a href="/blog/" class="popupMenuItem active"><i class="fa fa-paw" aria-hidden="true"></i>Блог</a></li> <li><a href="/graphics/" class="popupMenuItem"><i class="fa fa-pencil" aria-hidden="true"></i>Графика</a></li> <li><a href="/misc/" class="popupMenuItem"><i class="fa fa-code" aria-hidden="true"></i>Разное</a></li> <li><a href="/rpg_maker/" class="popupMenuItem"><i class="fa fa-diamond" aria-hidden="true"></i>RPG Maker</a></li> <li><a href="/godot/" class="popupMenuItem"><i class="fa fa-cogs" aria-hidden="true"></i>Godot</a></li> <li><a href="/about/" class="popupMenuItem"><i class="fa fa-github-alt" aria-hidden="true"></i>Мур?</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/comments/" class="popupMenuItem"><i class="fa fa-comments-o" aria-hidden="true"></i> Новые комментарии</a></li> <li><a href="https://murlab.disqus.com/latest.rss" class="popupMenuItem"><i class="fa fa-rss" aria-hidden="true"></i> RSS комментариев</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/archive/" class="popupMenuItem"><i class="fa fa-archive" aria-hidden="true"></i> Архив постов</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/files/" class="popupMenuItem"><i class="fa fa-cloud-download" aria-hidden="true"></i> Cкачать файлы</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/tags/" class="popupMenuItem"><i class="fa fa-tags" aria-hidden="true"></i> Все тэги</a></li> <li><a href="/feed.xml" class="popupMenuItem"><i class="fa fa-rss" aria-hidden="true"></i> RSS лента</a></li> </ul> </div> </div> <div class="content"> <div class="post"> <div class="postHeader"> <div class="postStar"><i class="fa fa-diamond" aria-hidden="true"></i></div> <div class="postDate"> 8 Января 2018 </div> <div class="postTitle">RMMV Awesome Battleground</div> </div> <div class="postContent"> <div class="postImage"> <img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/plugin_title.png" /> </div> <div class="postBody"> <p>И снова всем привет!</p> <p>В конце октября, начале ноября прошлого года на «Светлой Академии» проходил конкурс плагинов для RPG Maker. Конкурс проходил первый раз и как организатору данного мероприятия мне было немного боязно, что работ будет очень мало, если вообще будут.</p> <p>По этой причине, по большей части для массовки, мной был написан плагин «Awesome Battleground». Но случилось чудо, работ было предоставлено аж двенадцать штук, а моя работа разделила второе место, с чем себя и поздравляю.</p> <p>И сегодня мне бы хотелось рассказать немного подробнее о своей работе.</p> <p>По умолчанию в RPG Maker MV фоновое изображение для битвы, а также музыку можно задать только для всей карты. Да её можно изменить с помощью команд, но придётся это делать для каждого события на карте, это честно скажу немного утомительно. А как быть если противник двигается по карте? Тут он стоит на песочке, а тут уже переходит реку по мосту, а затем уже в лесу? Писать сложную логику и каждый раз задавать картинки?</p> <p>Что бы избавить разработчика от «головной боли» и был изначально придуман плагин «Awesome Battleground». На карте можно промаркировать зоны и в зависимости от цифры задать какое фоновое изображение, и музыка будут тут использованы:</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/regions.png" class="imgCenter" /></p> <p>Так же номер зоны можно изменить в любой момент командой плагина «setcurrentregionid NN» прямо в диалогах, где NN номер региона. Например, после общения с противником мир вокруг главного героя меняется и начинается битва. Главное не забыть по окончании вернуть значение региона на 0.</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/example.png" class="imgCenter" /></p> <p>Но на этом идея не остановилась и захотелось немного приукрасить оформление. К сожалению, в RPG Maker вообще очень много статичных картинок, поэтому было решено добавить немного динамичности, а именно помимо двух стандартных добавилось ещё два слоя для параллаксов. А также возможность разместить элементы анимации:</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/layers.png" class="imgCenter" /></p> <p>Для каждого слоя параллаксов можно задать один из эффектов, а точнее способ поведения изображения на экране:</p> <ol> <li>Зацикленные движения: <ul> <li>вверх</li> <li>вниз</li> <li>влево</li> <li>вправо</li> <li>вверх влево</li> <li>вверх право</li> <li>вниз влево</li> <li>вниз вправо</li> </ul> </li> <li>Движение в виде маятника: <ul> <li>вверх-вниз</li> <li>влево-вправо</li> </ul> </li> <li>Произвольные движения: <ul> <li>зигзагом</li> <li>по часовой стрелке</li> <li>против часовой стрелки</li> </ul> </li> <li>Проявление (fade in) и затухание (fade out)</li> <li>Мерцание</li> </ol> <p>Для зацикленных движений создаётся дубликат картинки и в зависимости от направления движения он располагается либо справа, либо снизу. Для движений по кругу создаётся 4 копии картинок, так что важно, чтобы они аккуратно стыковались (как например 3D текстуры) без швов. В противном случае это будет выглядеть не аккуратно.</p> <p>Проявление и затухание — это одинарная картинка, которая плавно проявляется и исчезает с помощью изменения значения альфа-канала.</p> <p>Так же в параметрах слоя параллакса можно задать скорость с которой будет двигаться слой, а также (при необходимости) можно задать задержку перед повтором. Например, можно выбрать что слой будет двигаться циклически вверх, но перед повторным движением будет выжидаться пауза.</p> <p>Помимо двух слоёв параллаксов, можно добавить на сцену анимацию. Всего можно указать четыре вида анимации, но с неограниченным количеством координат на экране. Основная идея была задать один вид анимации и продублировать их несколько раз на экране. Причём помимо координат задаётся ещё номер кадра с которого начинать, в результате чего анимация уже не выглядит как синхронные «китайские болванчики».</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/animation.png" class="imgCenter" /></p> <p>Немаловажным нововведением плагина, является возможность вместе с музыкой задать шумовой эффект (чириканье птичек, раскаты грома итд). Ну и конечно можно задать уровень громкости, как музыки, так и шумовых эффектов.</p> <p>Так же в плагине есть небольшое дополнение, позволяющий задать размер экрана. В отличии от многих других аналогичных, он корректно расставляет участников боя, если размер экрана больше 816x624. А также может учитывать соотношение сторон 16:9 или 3:4, что позволяет избавится от чёрных полосок по бокам в полноэкранном режиме. Если вам это не нужно или у вас есть другие планы, реализовывающие этот функционал, данную опцию можно отключить.</p> <p>К сожалению, для многих оказались не вполне понятно, как его настраивать. Поэтому остановимся немного подробнее на настройке параметров плагина.</p> <p>Начиная с версии RPG Maker MV 1.5.x появилась возможность, более продвинутой настройке плагинов. Но она же порой и вносит ещё большую путаницу, поскольку имеет много уровней вложенности и сразу не понятно, как куда попасть и где что расположено.</p> <p>Начнём с главной части настроек. Здесь всё просто, выбираем интересующий нас раздел, кликаем на него и открывается окно с настройками:</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/params_01.png" class="imgCenter" /></p> <p>Далее откроем меню с настройками для регионов, нажав на соответствующий пункт «Настройки для регионов». Пусть вас не пугает огромный список на скриншоте, изначально он будут пуст и для каждого региона вы должны задать свои настройки. Для этого делаем двойной клик мышкой на пустой строчке и откроется окошко для настройки нового региона:</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/params_02.png" class="imgCenter" /></p> <p>Здесь тоже относительно всё просто. Вначале нам нужно задать номер региона, который мы хотим настроить. Если выбрать 0, то будут настройки по умолчанию, когда регион не указан на карте. Если не создать такую запись, то на территории, где не задан номер региона будет стандартный фон для битвы на данной карты, без плюшек плагина «Awesome Battleground».</p> <p>После того как мы указали номер региона, нам нужно выбрать две картинки: заднего фона (battleground) и переднего (foreground). Картинки используются не из стандартной поставки RPG Maker, поэтому их нужно расположить в «img/fx_background» и «img/fx_foreground» соответственно. Примеры таких картинок вы можете найти в полном проекте.</p> <p>На этом собственно базовая настройка и завершена. Если же мы хотим добавить в сцену динамичности, можно настроить ещё 2 параллакса.</p> <p>Изображение с заготовками параллаксов должно быть предварительно скопировано в папку «img/fx_parallax». Далее выбираем эффект как себя вести изображению (двигаться, проявляться или мерцать). Также указываем скорость с которой будет двигаться наше изображение для параллакса.</p> <p>Для достижения эффекта параллакса, и в зависимости от выбранного эффекта, изображение будет дублироваться в памяти по горизонтали и/или вертикали. Это стоит учитывать при создании бесшовных изображений.</p> <p>По умолчанию эффект применяется постоянно, например, плывут облака по кругу. Но при необходимости, после того, как изображение сместиться на всю свою ширину (высоту) можно задать задержку «Повторить через». Как например это сделано в сцене с роботом, забор двигается постоянно, а фонари там двигаются с интервалами.</p> <p>При необходимости повторяем все настройки и для второго параллакса.</p> <p>При желании на сцене можно разместить анимационные элементы, как например огонь в сцене с шахтой или подводные растения. Всего видов анимации доступно четыре, но количество на сцене ограниченно лишь вашей фантазией и здравым смыслом.</p> <p>Изображение для анимации представляет из себя файл с кадрами, располагающимися друг за другом по вертикали. Файл должен быть скопирован в «img/fx_animation». Затем в параметрах указываем из сколько кадров будет состоять наша анимация, а также задержку между кадрами. Например, если анимация состоит из 50 кадров, то задержка будет 0, если из 25-ти, то уже 1, а для 17 может быть и 3. В любом случае подбирается значение индивидуально.</p> <p>Так же можно задать значение «Реверс», если хотим, чтобы анимация повторялась по кругу не с 1 кадра, а возвращалась в обратном порядке.</p> <p>После того, как закончили с настройкой анимации, переходим к её размещению на экране. К сожалению, в RPG Maker MV нет встроенных средств, поэтому координаты на экране придётся задавать вручную, указывая положение X и Y.</p> <p>Для этого так же делаем двойной клик мышкой на поле «Положение». Откроется ещё одно окно со списком координат. Для создания нового положения анимации на экране так же делаем двойной клик мышкой на пустой вкладке:</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/params_03.png" class="imgCenter" /></p> <p>Помимо координат на экране, можно задать номер кадра с которого начать анимацию. Причём для каждого нового положения на экране можно задать своё значение. В результате чего анимация не будет выглядеть как «синхронное плавание», а создаст некоторое подобие разнообразия.</p> <p>Как уже было сказано выше, ограничения на количество таких анимаций нет, но не стоит всё-таки сильно увлекаться, ибо не у всех компьютеры достаточно быстрые и велик риск того, что сцена боя превратится буквально в «пошаговую стратегию».</p> <p>По аналогии задаются настройки и для остальных трёх анимаций.</p> <p><img src="/images.posts/2018.01/08 - RMMV Awesome Battleground/params_04.png" class="imgCenter" /></p> <p>В конце есть ещё несколько пунктов настроек звуков для региона, с которыми, я надеюсь, вы без труда разберётесь сами.</p> <p>В качестве демонстрации скромных возможностей плагина было сделано это видео:</p> <iframe width="850" height="498" src="https://www.youtube.com/embed/eecgqzTflIU" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen=""></iframe> <p>Одним из дополнительных условий конкурса был «красивый» и понятный код, скрипт по возможности наполнен комментариями, что, где и на какой строке происходит. Сейчас это не актуально, поэтому если вам не интересно разбираться с внутренностями скрипта, можно скачать «чистую» версию с настройкой параметров на <a href="https://github.com/murlab/rpg-maker-mv-plugins/blob/master/Awesome%20Battleground/%5BRU%5D%20MUR_AwesomeBattleground.js">русском</a> и <a href="https://github.com/murlab/rpg-maker-mv-plugins/blob/master/Awesome%20Battleground/%5BEN%5D%20MUR_AwesomeBattleground.js">английском</a> языках. Если же интересно разобраться, что и как устроено, можно скачать <a href="https://github.com/murlab/rpg-maker-mv-plugins/blob/master/Awesome%20Battleground/%5BRU%5D%20MUR_AwesomeBattleground%20(with%20comments).js">версию с комментариями</a>. В любом случае главное не забыть переименовать файл в виде «MUR_AwesomeBattleground.js» иначе плагин не увидит свои настройки и вывалится с ошибкой.</p> <p>Все версии как обычно доступны на <a href="https://github.com/murlab/rpg-maker-mv-plugins/tree/master/Awesome%20Battleground">github</a>.</p> <p>А так же можно теперь посмотреть версию плагина <a href="https://murplay.github.io/">online</a>.</p> <p>Если вам не совсем понятно как настраивать плагин, то можете <a href="https://cloud.mail.ru/public/H2VU/ekPoQc4vq">скачать готовый проект</a> (~172Mb) для RPG Maker MV, который чуть выше демонстрируется на видео.</p> <div class="postTags"> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/rpg maker mv/">rpg maker mv</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/plugins/">plugins</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/javascript/">javascript</a></div> </div> </div> <div class="postEnd"> <div class="postEndLineStart"></div> <div class="postEndCont"><a href="javascript:history.back();"><< Назад</a></div> <div class="postEndLineFinish"></div> </div> </div> <div id="disqus_thread"></div> <script> (function() { var d = document, s = d.createElement('script'); s.src = 'https://murlab.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <div class="centerClean"></div> </div> </div> <div class="centerEnd"><div></div></div> <div class="footer">2014, 2017 &copy; Mur Laboratory</div> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111024724-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-111024724-1'); </script> </body> </html>
