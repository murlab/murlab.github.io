<!DOCTYPE html> <html lang="en"> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111024724-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-111024724-1'); </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>RMMV Графика для событий</title> <meta name="description" content="В данной статье рассказывается о новом плагине для RPG Maker MV — «MUR Event Graphics»"> <link rel="canonical" href="https://murlab.github.io/blog/RMMV%20Grafika%20dlja%20sobytij/"> <link rel="alternate" type="application/rss+xml" title="Mur Laboratory" href="/feed.xml"> <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /> <link rel="icon" type="image/png" href="/favicon.png" /> <link rel="stylesheet" type="text/css" href="/css/font-awesome.css" /> <link rel="stylesheet" type="text/css" href="/css/main.css" /> <script type="text/javascript" src="/js/main.js"></script> <link rel="stylesheet" href="/css/highlight/monokai-sublime.css"> <script src="/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Article", "headline": "RMMV Графика для событий", "image": "https://murlab.github.io/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/plugin_title.png", "keywords": [ "rpg maker mv", "plugins", "javascript" ], "datePublished": "2017-12-29", "dateModified": "2018-01-02", "articleSection": "rpg_maker", "author": { "@type": "Person", "name": "Mur" }, "creator": { "@type": "Person", "name": "Mur" }, "publisher": { "@type": "Organization", "name": "Mur Lab", "logo":{"@type":"ImageObject", "url":"https://murlab.github.io/images/avatar.png"} }, "articleBody": "Всем привет! Сегодня мне бы хотелось рассказать об одной своей новой поделке, а именно о скрипте для RPG Maker MV — «MUR Event Graphics». Изначально данный скрипт задумывался для того, чтобы дать возможность немного смещать графику событий, относительно центра. ", "mainEntityOfPage": "True" } </script> </head> <body onload="init();"> <div class="center"> <div class="header"> <div class="topLogo"></div> <div class="topMenuAdd"> <a href="/files/" class="topMenuItem" title="Файлы для скачивания"><i class="fa fa-download" aria-hidden="true"></i></a> <a href="/feed.xml" class="topMenuItem" title="Подписаться на RSS"><i class="fa fa-rss" aria-hidden="true"></i></a> </div> </div> <div id="navbar" class="topMenu"> <div class="topMenuLeft"></div> <div class="topMenuCenter"> <span class="topMenuSpace">&nbsp;</span> <span><a href="/blog/" class="topMenuItem active"><i class="fa fa-paw" aria-hidden="true"></i><br>Блог</a></span> <span><a href="/graphics/" class="topMenuItem"><i class="fa fa-pencil" aria-hidden="true"></i><br>Графика</a></span> <span><a href="/misc/" class="topMenuItem"><i class="fa fa-code" aria-hidden="true"></i><br>Разное</a></span> <span><a href="/rpg_maker/" class="topMenuItem"><i class="fa fa-diamond" aria-hidden="true"></i><br>RPG Maker</a></span> <span><a href="/godot/" class="topMenuItem"><i class="fa fa-cogs" aria-hidden="true"></i><br>Godot</a></span> <span><a href="/about/" class="topMenuItem"><i class="fa fa-github-alt" aria-hidden="true"></i><br>Мур?</a></span> </div> <div class="topMenuRight"></div> <a href="/"><div class="topMenuAvatar"></div></a> <div class="popupMenu"> <input id="popupMenuInput" type="checkbox" name="menu"/> <label id="popupMenuLabel" for="popupMenuInput"><span class="fa fa-bars topMenuIcon" aria-hidden="true"></span></label> <ul class="menu"> <li><a href="/blog/" class="popupMenuItem active"><i class="fa fa-paw" aria-hidden="true"></i>Блог</a></li> <li><a href="/graphics/" class="popupMenuItem"><i class="fa fa-pencil" aria-hidden="true"></i>Графика</a></li> <li><a href="/misc/" class="popupMenuItem"><i class="fa fa-code" aria-hidden="true"></i>Разное</a></li> <li><a href="/rpg_maker/" class="popupMenuItem"><i class="fa fa-diamond" aria-hidden="true"></i>RPG Maker</a></li> <li><a href="/godot/" class="popupMenuItem"><i class="fa fa-cogs" aria-hidden="true"></i>Godot</a></li> <li><a href="/about/" class="popupMenuItem"><i class="fa fa-github-alt" aria-hidden="true"></i>Мур?</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/comments/" class="popupMenuItem"><i class="fa fa-comments-o" aria-hidden="true"></i> Новые комментарии</a></li> <li><a href="https://murlab.disqus.com/latest.rss" class="popupMenuItem"><i class="fa fa-rss" aria-hidden="true"></i> RSS комментариев</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/archive/" class="popupMenuItem"><i class="fa fa-archive" aria-hidden="true"></i> Архив постов</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/files/" class="popupMenuItem"><i class="fa fa-cloud-download" aria-hidden="true"></i> Cкачать файлы</a></li> <li><div class="popupMenuLine"></div></li> <li><a href="/tags/" class="popupMenuItem"><i class="fa fa-tags" aria-hidden="true"></i> Все тэги</a></li> <li><a href="/feed.xml" class="popupMenuItem"><i class="fa fa-rss" aria-hidden="true"></i> RSS лента</a></li> </ul> </div> </div> <div class="content"> <div class="post"> <div class="postHeader"> <div class="postStar"><i class="fa fa-diamond" aria-hidden="true"></i></div> <div class="postDate"> 29 Декабря 2017 </div> <div class="postTitle">RMMV Графика для событий</div> </div> <div class="postContent"> <div class="postImage"> <img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/plugin_title.png" /> </div> <div class="postBody"> <p>Всем привет!</p> <p>Сегодня мне бы хотелось рассказать об одной своей новой поделке, а именно о скрипте для RPG Maker MV — «MUR Event Graphics».</p> <p>Изначально данный скрипт задумывался для того, чтобы дать возможность немного смещать графику событий, относительно центра.</p> <p>По правде говоря, мне уже порядком поднадоело перерисовывать по десять раз одни и те же картинки каждый раз подгоняя, а достаточно ли теперь стоит тумбочка близко к стене или же её ещё надо подвинуть на пару пикселей. Или же делать несколько вариантов, когда книжка лежит с одного края стола, а теперь она ближе к другому краю, а вот на кровати она вообще должна быть по центру и выше итд.</p> <p>Конечно в интернете уже достаточно «обсосали» и не раз эту тему «смещения графики событий» и был написан не один скрипт, как и для VX Ace, так и для MV, но мне всё же захотелось сделать свой вариант и на это были причины.</p> <p>Во всех ранее предложенных вариантах была примерна одна и та же схема. В начале события создаются комментарии в которых описываются настройки, как и куда смещать нашу картинку события. По сути у меня такая же схема, задаём команду с параметрами и вуаля.</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/comments.png" class="imgCenter" /></p> <p>Начнём с первой команды, собственно команды смещения графики — <strong>&lt;move_event_gfx_to: x, y, z&gt;</strong>. Как не трудно догадаться <strong>x</strong> и <strong>y</strong> это смещение по горизонтали и вертикали соответственно. Причём можно задать отрицательные числа и картинка будет смещена в противоположную сторону. Меняя значение <strong>z</strong> можно задать номер слоя и, картинка может оказаться как за игроком, так и над ним (не меняя основные свойства события — «<em>priority</em>»).</p> <p>Следующая идея была немного «оживить» графику события. В моей игрушке есть дирижабль, который стоит на привязи, но слегка колышется вверх-вниз.</p> <p>Изначально у меня было отрисовано три кадра с положением, и они циклически сменялись. Выглядело это не очень, кадров мало, возни много. И тут пришла в голову идея, что было бы очень классно, если бы картинка с дирижаблем «болталась» сама по себе без участия покадровой анимации.</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/zeppelin.gif" class="imgLeft" />Так появилась команда — <strong>&lt;slide_event_vertical: size, speed&gt;</strong>. Как ясно из названия это скольжение, а если быть точнее, то циклическое движение с эффектом маятника. По краям движение затухает, пока не сменит направление, а в середине максимально ускоряется. В параметрах можно задать размер зоны движения — <strong>size</strong>, ну и скорость движения «объекта» — <strong>speed</strong>.</p> <p>Команда <strong>&lt;slide_event_horizontal size, speed&gt;</strong> повторяет предыдущую, лишь с той разницей, что движение (мотание) происходит уже горизонтально.</p> <p>Возможно многие замечали, что в RPG Maker MV очень много всяких мелких недочётов, они не влияют на игровой процесс, но это как песок в сандалиях, ходить не мешает, но весьма неприятно.</p> <p>К такому вот «песочку» относится момент, когда персонаж заходит в какую-нибудь дверь. Меня вот очень раздражает, что он как бы входит, но при этом верхняя часть головы постоянно задевает за дверной косяк. Конечно можно нарисовать дверь чуть больше, нарисовать какую-нибудь специальную анимацию, но мне захотелось решить это вопрос раз и навсегда.</p> <p>Идея заключается в следующем: например, берём событие с дверью, и добавляем к нему две дополнительные картинки. Одна располагается за событием (дверью), другая поверх события.</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/house_parts.png" class="imgCenter" /></p> <p>На первой (фоновой) картинке мы рисуем часть здание с тёмным (светлым) дверным проёмом, а на второй (передней) картинке мы оставляем часть изображения, но лишь до места где начинается уже сам вход.</p> <p>Когда персонаж заходит в дверь, он оказывается между двумя картинками и уже «не стукается головой», а спокойно проходит в дверной проём.</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/house.gif" class="imgCenter" /></p> <p>У этой идеи есть ещё один плюс. Во-первых, в тайлах вместо элементов (или даже целого) здания остаётся свободное место под другие элементы декора, а во-вторых теперь здания можно делать более уникальными (красивыми, разнообразными), они не привязаны ни к сетке тайлов, ни к размерам, ни к тем более положению (дверь всегда по центру).</p> <p>Ну и собственно сами команды — <strong>&lt;set_event_bg_gfx: bitmap, offsetX, offsetY&gt;</strong> и <strong>&lt;set_event_fg_gfx: bitmap, offsetX, offsetY&gt;</strong>. Первая (bg) задаёт фоновую картинку, вторая соответственно переднюю. В bitmap указывается имя картинки, которая будет подгружена из <em>img/events/</em>, а <strong>offsetX</strong>, <strong>offsetY</strong> её смещение относительно центра события, например, если мы всю туже дверь захотим сместить.</p> <p>Следующая идея была сделать если не полноценную, то хотя бы упрощённую анимацию. Сейчас, например, можно сделать анимацию у события следующим образом. Наклепать кучу вкладок (шагов) события с привязкой к значению какой-нибудь переменной. Переходим на новый шаг, меняется картинка, меняем переменную, выжидаем паузу и хоп на следующем опросе «системой» у нас новая картина. Ну и конечно всё это должно быть в режиме «<em>parallel</em>» (параллельно).</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/animation.png" class="imgCenter" /></p> <p>У этого метода куча недостатков, начиная с того, что это просто нудно делать, и заканчивая тем, что очень сложно потом отследить логику события, если по ходу придётся переключатся по каким-либо условиям.</p> <p>Для того, чтобы избавить себя от этого «дурдома» с кадрами, была придумана команда — <strong>&lt;animation_event_start: frames, pause, reverse&gt;</strong>. Данная команда поэтапно показывает кадры события начиная с вниз 1, вниз 2, вниз 3, влево 1, влево 2,… итд. Количество кадров можно ограничить, задав параметр — <strong>frames</strong>. Задержку перед очередной сменой кадра можно задать в <strong>pause</strong>. Дойдя до последнего кадра, анимация начнётся вновь с первого кадра (вниз 1), но если задать <strong>reverse</strong> — <em>true</em>, то анимация продолжится в обратном порядке.</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/mill.gif" class="imgCenter" /></p> <p>Можно конечно было бы сделать возможность и задавать внешний файл с кадрами анимации, и задавать произвольную последовательность кадров, но по правде говоря мне очень не хотелось сильно усложнять плагин, тем более, что в нём и так всё очень непросто.</p> <p>В качестве продолжения идеи со «скольжением» картинки, получилась ещё одна команда — <strong>&lt;jump_event: hight, speed&gt;</strong>. Как не трудно догадаться из названия, картинка будет прыгать. Например, во многих аркадных играх это различные звёздочки, монетки и другие плюшки. Параметр <strong>hight</strong> задаёт как высоко будет прыгать картинка, а <strong>speed</strong> соответственно насколько это будет быстро происходить.</p> <p>В дополнении к «прыжкам» есть ещё одна команда — <strong>&lt;set_event_shadow_to: bitmap, offsetX, offsetY&gt;</strong>. Данная команда добавляет позади нашего события ещё одну картинку и работает в паре с <strong>slide_event_vertical</strong> или <strong>jump_event</strong>. В отличии от того же <strong>set_event_bg_gfx</strong> данная картинка подвергается дополнительным изменениям.</p> <p><img src="/images.posts/2017.12/29 - RMMV Grafika dlja sobytij/coin.gif" class="imgRight" /> Например, задав в качестве <strong>bitmap</strong> изображение тени (которое также будет загружено из <em>img/events/</em>), оно будет изменять свой размер и прозрачность (уровень <em>alpha</em>) в зависимости от позиции картинки <strong>slide_event_vertical</strong> или <strong>jump_event</strong>. Чем выше картинка события, тем меньше картинка тени и соответственно она менее видна, чем картинка опускается ниже, тем тень становится больше и более заметна.</p> <p>Всё это конечно же мелочи, но в целом, я думаю, они сделают вашу игру более привлекательной, а процесс её создания менее утомительным. Скачать свежую версию плагина всегда можно с <a href="https://github.com/murlab/rpg-maker-mv-plugins/tree/master/Event%20Graphics">github</a>.</p> <p>Удачи и творческих успехов!</p> <p><strong>Обновление от 2 января 2018 г.</strong>:</p> <div class="hline"></div> <p>К сожалению, совсем вылетело из головы, что такие объекты как Sprite, а тем более bitmap, нельзя создавать в объектах, которые потом будут сохранятся. Начиная ещё с VX Ace, RPG Maker очень нервничает, когда в файле сохранения появляются «крупные» объекты с непонятным содержимым. Так и получилось с Event’ами, ведь их состояние сохраняется в каждом файле сохранения игры, а вместе с ним и пытались сохраниться данные навешанных картинок.</p> <p>Сейчас логика скрипта несколько переписана, спрайты и их картинки создаются в массивах плагина и никак не связаны с содержимым event’а. Игра успешно сохраняется и загружает состояние событий. Надеюсь больше никаких ляпов не вылезет ещё ~_~’</p> <p>Обновлённая версия 1.1 как всегда доступна на <a href="https://github.com/murlab/rpg-maker-mv-plugins/tree/master/Event%20Graphics">github</a>.</p> <div class="postTags"> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/rpg maker mv/">rpg maker mv</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/plugins/">plugins</a></div> <div class="postTag"><i class="fa fa-tag" aria-hidden="true"></i> <a href="/tags/javascript/">javascript</a></div> </div> </div> <div class="postEnd"> <div class="postEndLineStart"></div> <div class="postEndCont"><a href="javascript:history.back();"><< Назад</a></div> <div class="postEndLineFinish"></div> </div> </div> <div id="disqus_thread"></div> <script> (function() { var d = document, s = d.createElement('script'); s.src = 'https://murlab.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <div class="centerClean"></div> </div> </div> <div class="centerEnd"><div></div></div> <div class="footer">2014, 2017 &copy; Mur Laboratory</div> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111024724-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-111024724-1'); </script> </body> </html>
